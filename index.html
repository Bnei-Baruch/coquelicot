<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Coquelicot by gotsunami</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Coquelicot</h1>
          <h2>Upload your files as easily as a poppy petal flies into the air.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/gotsunami/coquelicot/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/gotsunami/coquelicot/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/gotsunami/coquelicot" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h2>
<a id="coquelicot" class="anchor" href="#coquelicot" aria-hidden="true"><span class="octicon octicon-link"></span></a>Coquelicot</h2>

<p>Coquelicot is an easy to use server-side upload service written in Go.</p>

<p>It is compatible with the <a href="https://github.com/blueimp/jQuery-File-Upload">jQuery-File-Upload</a>
widget and supports chunked and resumable file upload. </p>

<p>Using Coquelicot, you can add upload functionality to your project
very easily. Just download and unzip the Coquelicot binary distribution
for your OS and configure the jQuery-File-Upload widget.</p>

<p><img src="http://go-tsunami.com/assets/images/coquelicotLogo.jpg" alt="logo"></p>

<h3>
<a id="server-setup" class="anchor" href="#server-setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Server Setup</h3>

<p>You can use a binary release or get the project if you have a working Go installation.</p>

<h4>
<a id="binary-release" class="anchor" href="#binary-release" aria-hidden="true"><span class="octicon octicon-link"></span></a>Binary Release</h4>

<p>Grab the latest <a href="https://github.com/gotsunami/coquelicot/releases">binary release</a> for you system. Unzip it
and run</p>

<pre><code>$ ./coquelicot -storage /tmp/files -host localhost:9073
</code></pre>

<p>to store uploaded files into <code>/tmp/files</code> and make the application listen on the loopback interface port 9073
(run <code>coquelicot.exe</code> on Windows).</p>

<h4>
<a id="source-release" class="anchor" href="#source-release" aria-hidden="true"><span class="octicon octicon-link"></span></a>Source Release</h4>

<p>Grab the latest stable version with:</p>

<pre><code>$ go get gopkg.in/gotsunami/coquelicot.v1
</code></pre>

<p>See the <a href="http://gopkg.in/gotsunami/coquelicot.v1">API documentation</a>.</p>

<h3>
<a id="jquery-file-upload-setup-client" class="anchor" href="#jquery-file-upload-setup-client" aria-hidden="true"><span class="octicon octicon-link"></span></a>jQuery-File-Upload Setup (Client)</h3>

<p>The <code>fileupload</code> object needs the <code>xhrFields</code>, <code>maxChunkSize</code> and <code>add</code> fields to be defined.</p>

<ul>
<li>
<code>xhrFields</code>: enables sending of cross-domain cookies, which is required to properly handle chunks of data server-side</li>
<li>
<code>maxChunkSize</code>: enables uploading chunks of file</li>
<li>
<code>add</code>: overwrites the default <code>add</code> handler to support resuming file upload</li>
</ul>

<p>Download the <a href="https://github.com/blueimp/jQuery-File-Upload/releases">latest release</a> of jQuery-File-Upload,
edit the <code>js/main.js</code> file in the distribution and make the <code>fileupload</code> initialization look like
(replacing the <code>localhost:9073</code> part with the name:port of your server running the <code>coquelicot</code> program):</p>

<pre><code>$('#fileupload').fileupload({
    // Send cross-domain cookies
    xhrFields: {withCredentials: true},
    url: 'http://localhost:9073/files',
    // Chunk size in bytes
    maxChunkSize: 1000000,
    // Enable file resume
    add: function (e, data) {
        var that = this;
        $.ajax({
            url: 'http://localhost:9073/resume',
            xhrFields: {withCredentials: true},
            data: {file: data.files[0].name}
        }).done(function(result) {
            var file = result.file;
            data.uploadedBytes = file &amp;&amp; file.size;
            $.blueimp.fileupload.prototype.options.add.call(that, e, data);
        });
    }
});
</code></pre>
        </section>

        <footer>
          Coquelicot is maintained by <a href="https://github.com/gotsunami">gotsunami</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
